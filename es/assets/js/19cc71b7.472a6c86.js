"use strict";(self.webpackChunkink_docs=self.webpackChunkink_docs||[]).push([[6114],{81538:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>s,default:()=>u,frontMatter:()=>a,metadata:()=>c,toc:()=>l});var r=t(74848),o=t(28453);const a={title:"Compilar tu Contrato",slug:"/getting-started/building-your-contract",hide_title:!0},s="Compilar tu Contrato",c={id:"getting-started/compiling",title:"Compilar tu Contrato",description:"Ejecuta el siguiente comando en tu directorio flipper para compilar tu smart contract:",source:"@site/i18n/es/docusaurus-plugin-content-docs/current/getting-started/compiling.md",sourceDirName:"getting-started",slug:"/getting-started/building-your-contract",permalink:"/es/getting-started/building-your-contract",draft:!1,unlisted:!1,editUrl:"https://github.com/paritytech/ink-docs/edit/master/docs/getting-started/compiling.md",tags:[],version:"current",frontMatter:{title:"Compilar tu Contrato",slug:"/getting-started/building-your-contract",hide_title:!0},sidebar:"reference",previous:{title:"Crear un proyecto ink!",permalink:"/es/getting-started/creating-an-ink-project"},next:{title:"Arranca un Nodo Substrate",permalink:"/es/getting-started/running-substrate"}},i={},l=[{value:"Debug vs. Release Build",id:"debug-vs-release-build",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("img",{src:"/img/title/cargo-contract.svg",className:"titlePic"}),"\n",(0,r.jsx)(n.h1,{id:"compilar-tu-contrato",children:"Compilar tu Contrato"}),"\n",(0,r.jsxs)(n.p,{children:["Ejecuta el siguiente comando en tu directorio ",(0,r.jsx)(n.code,{children:"flipper"})," para compilar tu smart contract:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cargo contract build\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Este comando construir\xe1 lo siguiente para tu contrato: un binario Wasm, un fichero metadata (el cual el ABI del contrato) y un fichero ",(0,r.jsx)(n.code,{children:".contract"})," que agrupa a ambos. Este fichero ",(0,r.jsx)(n.code,{children:".contract"})," puede ser utilizado para desplegar el contrato en una red. Si todo va bien, deber\xedas ver una carpeta ",(0,r.jsx)(n.code,{children:"target"})," que contiene estos ficheros:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"target\n  \u2514\u2500 ink\n    \u2514\u2500 flipper.contract\n    \u2514\u2500 flipper.wasm\n    \u2514\u2500 flipper.json\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Vamos a ver la estructura de ",(0,r.jsx)(n.code,{children:"flipper.json"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "metadataVersion": "0.1.0",\n  "source": {...},\n  "contract": {...},\n  "spec": {\n    "constructors": [...],\n    "docs": [],\n    "events": [],\n    "messages": [...],\n  },\n  "storage": {...},\n  "types": [...]\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Este fichero describe todas las interfaces que pueden ser utilizadas para interactuar con tu contrato:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"types"})," proporciona el personalizado ",(0,r.jsx)(n.strong,{children:"data types"})," utilizado en el resto del fichero JSON."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"storage"})," define todos los items ",(0,r.jsx)(n.strong,{children:"storage"})," controlados por tu contrato y como acceder a ellos."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"spec"})," almacena informaci\xf3n sobre las funciones invocables como ",(0,r.jsx)(n.strong,{children:"constructors"})," y ",(0,r.jsx)(n.strong,{children:"messages"}),", un usuario\npuede llamarlas para interaccionar con el contrato. Tambi\xe9n tiene informaci\xf3n que puede ayudar como los ",(0,r.jsx)(n.strong,{children:"events"}),"\nque son emitidos por el contrato o cualquier ",(0,r.jsx)(n.strong,{children:"docs"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Si miras de cerca a los constructors y los messages tambi\xe9n ver\xe1s un ",(0,r.jsx)(n.code,{children:"selector"})," que contiene un hash de 4-bytes del nombre de la funci\xf3n\ny que es utilizado para enrutar las llamadas de tu contrato a las funciones correctas."]}),"\n",(0,r.jsxs)(n.p,{children:["En la siguiente secci\xf3n arrancaremos un ",(0,r.jsx)(n.a,{href:"https://github.com/paritytech/substrate-contracts-node",children:"Substrate Smart Contracts node"}),"\ny configuraremos el ",(0,r.jsx)(n.a,{href:"https://github.com/paritytech/contracts-ui",children:"Contracts UI"})," para interactuar con el."]}),"\n",(0,r.jsx)(n.h2,{id:"debug-vs-release-build",children:"Debug vs. Release Build"}),"\n",(0,r.jsxs)(n.p,{children:["Por defecto, ",(0,r.jsx)(n.code,{children:"cargo-contract"})," compilar\xe1 el contrato en modo debug. Esto significa\nwue el contrato imprimir\xe1 declaraciones como"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",children:'ink::env::debug_println!("magic number: {}", value);\n'})}),"\n",(0,r.jsxs)(n.p,{children:["en la consola del nodo si debugging ha sido activado (",(0,r.jsx)(n.a,{href:"/faq#how-do-i-print-something-to-the-console-from-the-runtime",children:"instrucciones aqu\xed"}),").\nPara incluir esta funcionalidad la compilaci\xf3n en modo debug de un contrato incluye\nl\xf3gica m\xe1s pesada."]}),"\n",(0,r.jsxs)(n.p,{children:["De manera que los contratos que sean ejecutados en producci\xf3n deber\xe1n ser compilados\ncon la opci\xf3n ",(0,r.jsx)(n.code,{children:"--release"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cargo contract build --release\n"})}),"\n",(0,r.jsx)(n.p,{children:"Esto se encargar\xe1 de que nada que no sea necesario sea compilado en el Wasm blob,\nhaciendo el contrato m\xe1s r\xe1pido y barato de desplegar y ejecutar."}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"cargo-contract"})," imita as\xed el comportamiento de ",(0,r.jsx)(n.code,{children:"cargo"})," con programas Rust:\nla opci\xf3n ",(0,r.jsx)(n.code,{children:"--release"})," necesita pasarse explicitamente a ",(0,r.jsx)(n.code,{children:"cargo build"}),"."]})})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>c});var r=t(96540);const o={},a=r.createContext(o);function s(e){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);